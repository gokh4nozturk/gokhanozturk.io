Tabii kanka â€” iÅŸte yukarÄ±daki iÃ§eriÄŸin tamamÄ± doÄŸru biÃ§imlendirilmiÅŸ tek bir .md dosyasÄ± olarak hazÄ±r ğŸ‘‡
(kopyalayÄ±p fix-macos-tempdir.md diye kaydedebilirsin)

â¸»

---

title: "macOS'ta Bun / NPM / Yarn AccessDenied HatasÄ±nÄ±n KalÄ±cÄ± Ã‡Ã¶zÃ¼mÃ¼"
date: 2025-10-29
author: "GÃ¶khan"
tags: ["macOS", "bun", "npm", "node", "frontend", "debug"]
description: "macOS Ã¼zerinde Bun, NPM, Yarn gibi package manager'larda 'unable to write to tempdir: AccessDenied' hatasÄ±nÄ±n sistem seviyesinde Ã§Ã¶zÃ¼mÃ¼."

---

# macOS'ta Bun / NPM / Yarn â€œAccessDenied: unable to write to tempdirâ€ HatasÄ±nÄ±n KalÄ±cÄ± Ã‡Ã¶zÃ¼mÃ¼

macOS Ã¼zerinde `bun install`, `npm install` veya `yarn install` komutlarÄ±nÄ± Ã§alÄ±ÅŸtÄ±rÄ±rken ÅŸu hatayÄ± aldÄ±ysan:

error: bun is unable to write files to tempdir: AccessDenied

yalnÄ±z deÄŸilsin.  
Bu hata, macOSâ€™in sistem geÃ§ici dizinlerinde (`/tmp`, `/private/tmp` veya `$TMPDIR`) bozulmuÅŸ izinlerden kaynaklanÄ±yor.  
SonuÃ§ olarak CLI araÃ§larÄ±, geÃ§ici dosya oluÅŸturmak istediklerinde reddediliyor.

---

## ğŸ’¡ Belirti

TÃ¼m package managerâ€™lar (`bun`, `npm`, `yarn`, `pnpm`) aynÄ± ÅŸekilde patlÄ±yorsa,  
temel sebep bÃ¼yÃ¼k olasÄ±lÄ±kla macOSâ€™in `$TMPDIR` environment deÄŸiÅŸkeninin hatalÄ± bir dizine iÅŸaret etmesidir.

---

## ğŸ§© Ã‡Ã¶zÃ¼m: Temp dizinlerini onarmak ve sabitlemek

AÅŸaÄŸÄ±daki tek satÄ±rlÄ±k komut, sistemdeki temp izinlerini dÃ¼zeltir,  
kullanÄ±cÄ±ya Ã¶zel bir `~/.tmp` dizini oluÅŸturur ve shell configâ€™ine kalÄ±cÄ± `$TMPDIR` ekler.

```bash
sudo chown root:wheel /tmp /private/tmp && \
sudo chmod 1777 /tmp /private/tmp && \
mkdir -p "$HOME/.tmp" && chmod 700 "$HOME/.tmp" && \
sed -i '' '/TMPDIR=/d' "$HOME/.zshrc" 2>/dev/null || true; \
printf '\n# Force user-level tmp to avoid macOS TMPDIR quirks\nexport TMPDIR="$HOME/.tmp"\n' >> "$HOME/.zshrc"; \
source "$HOME/.zshrc"; \
echo "TMPDIR -> $TMPDIR"; \
ls -ld /tmp /private/tmp "$HOME/.tmp"; \
mktemp || true


â¸»

ğŸ” Komutun yaptÄ±ÄŸÄ± iÅŸlemler

AdÄ±m	AÃ§Ä±klama
sudo chown root:wheel /tmp /private/tmp	Sistem temp klasÃ¶rlerinin sahibi ve grubu root:wheel olarak dÃ¼zeltilir.
sudo chmod 1777 /tmp /private/tmp	Herkesin yazabileceÄŸi ama baÅŸkalarÄ±nÄ±n dosyasÄ±nÄ± silemeyeceÄŸi ÅŸekilde izin verilir (sticky bit t).
mkdir -p "$HOME/.tmp"	KullanÄ±cÄ±ya Ã¶zel bir temp klasÃ¶rÃ¼ oluÅŸturur.
chmod 700 "$HOME/.tmp"	Sadece senin okuyup yazabileceÄŸin ÅŸekilde gÃ¼venli hale getirir.
sed -i '' '/TMPDIR=/d' ~/.zshrc	.zshrc dosyasÄ±nda eski TMPDIR tanÄ±mlarÄ±nÄ± siler.
export TMPDIR="$HOME/.tmp"	Her terminal oturumunda temp dizinini ~/.tmp olarak sabitler.
mktemp	Son kontrol: gerÃ§ekten yazÄ±labiliyor mu, test eder.


â¸»

âœ… DoÄŸrulama

Yeni bir terminal aÃ§ ve ÅŸu komutlarÄ± Ã§alÄ±ÅŸtÄ±r:

echo $TMPDIR
ls -ld $TMPDIR

Beklenen Ã§Ä±ktÄ±:

/Users/<kullanÄ±cÄ±>/.tmp
drwx------  ...

ArtÄ±k bun install, npm install, yarn install hepsi normal Ã§alÄ±ÅŸacaktÄ±r.
Sorun tamamen ortadan kalkmÄ±ÅŸ olur.

â¸»

ğŸ§  Neden Oluyor?

macOS her kullanÄ±cÄ± oturumunda /var/folders/.../T/ gibi rastgele temp pathâ€™ler oluÅŸturur.
Ancak bazen reboot veya gÃ¼ncelleme sonrasÄ± bu klasÃ¶r silinir,
fakat $TMPDIR environment deÄŸiÅŸkeni hÃ¢lÃ¢ eski pathâ€™e iÅŸaret eder.
CLI araÃ§larÄ± oraya yazmaya Ã§alÄ±ÅŸtÄ±ÄŸÄ±nda â€œAccessDeniedâ€ hatasÄ± alÄ±r.

~/.tmp Ã§Ã¶zÃ¼mÃ¼yle artÄ±k senin kontrolÃ¼nde kalÄ±cÄ± bir temp klasÃ¶rÃ¼n olur,
macOSâ€™in rastgele dizin yÃ¶netimi seni etkilemez.

â¸»

ğŸ”’ GÃ¼venlik Notu

chmod 700 ~/.tmp sayesinde sadece sen okuyabilir/yazabilirsin.
Multi-user sistemlerde bile gÃ¼venlidir.
AyrÄ±ca sistem gÃ¼ncellemeleri /tmp izinlerini bozsa bile senin $TMPDIR etkilenmez.

â¸»

ğŸ§© Ã–zet

Ne yapÄ±lÄ±r	Neden yapÄ±lÄ±r
/tmp izinleri onarÄ±lÄ±r	Sistem genelinde geÃ§ici dosyalar dÃ¼zgÃ¼n Ã§alÄ±ÅŸÄ±r
~/.tmp oluÅŸturulur	KullanÄ±cÄ±ya Ã¶zel gÃ¼venli temp klasÃ¶rÃ¼
$TMPDIR sabitlenir	CLI araÃ§larÄ± kararlÄ± ÅŸekilde Ã§alÄ±ÅŸÄ±r


â¸»

ğŸš€ SonuÃ§

Bu adÄ±mlardan sonra bun, npm, yarn, pnpm, vite, eslint gibi tÃ¼m araÃ§lar
sorunsuz bir ÅŸekilde Ã§alÄ±ÅŸÄ±r.
â€œunable to write files to tempdir: AccessDeniedâ€ hatasÄ±nÄ± bir daha gÃ¶rmezsin.

â¸»

Â© 2025 GÃ¶khan â€“ macOS Developer Tips

---

```
